## 2016 Fall semester ecoinformatics midterm exam


### 說明

1. 作答時間：2016-11-18 09:00 CST -- 2016-12-02 08:59 CST 以 commit 時間為準。
2. 請用 github 繳交你的作業
 
   邀請連結：
   https://classroom.github.com/assignment-invitations/4567b444696dda2bb90487c487553750


3. 格式
   
   a. 將你的作法用 [R Markdown](http://rmarkdown.rstudio.com) 詳細寫出，
      包含做法過程、註解等

   b. 繳交時必須包含 ```.rmarkdown```, ```.r``` ，請使用你的學號加上 mid，例如：
```r
	1033579_mid.r
	1033579_mid.rmarkdown
```
   c. 所有的文字編碼都必須是 UTF-8 (unicode) 

4. 關於抄襲與剽竊

   期中考試請自行作答，可上網搜尋或討論，但不可以抄襲別人的。一旦發現以零分計算。


### 試題

1. 請隨機產生 10000 組正整數儲存成 vector 格式，並輸出成 random10k.csv (5%)

2. 請使用 for 迴圈列出 15 個[費布納西(Fibonacci)數列](https://en.wikipedia.org/wiki/Fibonacci_number) (10%)

4. 請將 sample_data.txt 輸入進 R 內，並完成以下計算 (55%)

   (a) 將 ```yyyymmddhh``` 轉成 POSIXct 時間戳記格式，
       並新增為一個欄(variable)，命名為 timestamp。並將此 sample data 輸出為
       sample_data_parsed.csv (以逗號分隔，具有欄位名稱)

   (b) 請計算 2014 年至 2015 年這個測站的每月平均氣溫、每月平均濕度、每月累積降水，
       並用表格呈現。表格範例如下：

|            |   1  |   2  |   3  |   4  |   5  |  ...  |  12  |
|  --------- | ---- | ---- | ---- | ---- | ---- | ----- | ---- |
| 月平均氣溫 |      |      |      |      |      |  ...  |      |
| 月平均濕度 |      |      |      |      |      |  ...  |      |
| 月累積降水 |      |      |      |      |      |  ...  |      |


  (c) 請計算 2014 年和 2015 年最冷月分別是在哪個月份？(提示：先計算月均溫)

  (d) 在 2015 年最冷的那個月份中，該月中每日的最低溫平均是幾度C？

  (e) 請計算 2014 年和 2015 年中，最熱的月分別是在哪個月份？

  (f) 請計算 2014 年最熱的月份中，該月的每日最高溫平均為幾度C?

  (g) 請算出 2014 至 2015 年中，最濕月份的平均溫度

  (h) 請計算每個月的月溫差(每月最高溫減去每月最高溫，取兩年平均)，平均月溫差最大的是哪個月？

  (i) 請計算這兩年的年溫差平均(每年最高溫減去最低溫)

  (j) 溫量指數(warmth index)是 Kira (1945) 提出的一個生態氣候指標，其計算方式為:

      (1) 若該月均溫高於 5 ºC，則將該月份的月均溫減去 5 ºC。
      (2) 若該月均溫低於或等於 5 ºC，則令其為 0 ºC
      (3) 將所有減去 5 ºC 或當成 0 ºC 的月均溫相加起來得到的數據稱為「溫量指數」

      請根據 (b) 所計算出的數值，算出 2014 至 2015 年的溫量指數。

  (k) 請使用 [climatol](https://cran.r-project.org/web/packages/climatol/index.html) package 
      繪製 2014 至 2015 的生態氣候圖(Ecological climate diagrams)。
      提示：你需要計算出每個月的累積降水平均、每日最高溫平均、每日最低溫平均、每月絕對最低溫。
      可參考[繪製生態氣候圖](https://gist.github.com/mutolisp/3cc9c337c271fbfd12ec6e15a05f8d23)


3. 請計算 Table 2 中的下列各子題 (30%)

  (a) 請計算各島環境因子(total_cover, C, EC, ..., etc.) 的平均、
      第一四分位數、中位數、第三四分位數、最大值及最小值以及標準差，並整理成如下表格：

|                    |  average            | 1st Qua.   | mean    | ...  | standard deviation |
| ------------------ | ------------------- | ---------- | ------- | ---- | ------------------ |
| 鋤頭嶼 total cover |                     |            |         |      |                    |
| 鋤頭嶼 C           |                     |            |         |      |                    |
| 鋤頭嶼 N           |                     |            |         |      |                    |
| ....               |                     |            |         |      |                    |
| 東吉嶼 total cover |                     |            |         |      |                    |
| ...                |                     |            |         |      |                    |
| 西嶼坪嶼 rock_ratio |                     |            |         |      |                    |


  (b) 請分別列出 C, EC, K, Na, N 最高的五個樣區(plotid)


### 資料說明

1. Sample data (sample_data.txt) 是一個氣象站 2014 至 2015 年的逐時資料(Table 1)，
欄位名稱代表的意義如下：

* yyyymmddhh: 西元四位數年
* PS01: 測站氣壓(hPa)
* TX01: 溫度(ºC)
* RH01: 相對濕度(%)
* WD01: 平均風風速(m/s)
* WD02: 平均風風向(360 degree)
* PP01: 降水量(mm)
* SS01: 日照時數(hr)

Table 1. A meterological station hourly observation data

|    1 |  yyyymmddhh |   PS01 |   TX01 |  RH01   | WD01  |  WD02  |  PP01  |  SS01  |
| ---: | ----------- | -----: | -----: | ----:   | ----: | ----:  | ----:  | -----: | 
|    2 |  2014010101 | 1015.4 |   14.7 |    89   |  0.8  | 360.0  |   0.0  | -9999  |
|    3 |  2014010102 | 1015.0 |   14.8 |    88   |  0.8  | 360.0  |   0.0  | -9999  |
|    4 |  2014010103 | 1014.5 |   14.0 |    92   |  0.1  |   0.0  |   0.0  | -9999  |
|    5 |  2014010104 | 1014.6 |   14.5 |    88   |  0.6  | 360.0  |   0.0  | -9999  |
|    6 |  2014010105 | 1014.6 |   14.2 |    89   |  0.9  | 360.0  |   0.0  | -9999  |
|    7 |  2014010106 | 1015.3 |   14.6 |    83   |  0.9  | 360.0  |   0.0  | -9999  |
|    8 |  2014010107 | 1015.6 |   14.5 |    81   |  0.9  | 360.0  |   0.0  | -9999  |


2. penghu_env.csv 澎湖南方四島環境因子資料

下表(Table 2) 中為澎湖南方四島的植群樣區之環境因子資料，其欄位名稱意義為：

* island: 島嶼
* plotid: 樣區編號
* total_cover: 植群覆蓋度(%, 0-100)
* C: 土壤中的全碳量
* EC: 土壤的電導度(electrical conductivity)
* K: 土壤中的鉀離子含量
* Na: 土壤中的鈉離子含量
* N: 土壤中的全氮量
* rock_ratio: 岩石地比例

Table 2. Environmental variables of the South Penghu Islands

| island  |  plotid |  total_cover |  C     |  EC     |  K     |  Na    |  N     |  rock_ratio  |
| :-----  | :------ | -----------: |  :---- | ----:   |  ----: |  ----: | -----: | ------------ | 
| 鋤頭嶼  |  ct01   |  85          |  3.08  |  127.3  |  1.51  |  5.72  |  0.25  |  5           |
| 鋤頭嶼  |  ct02   |  50          |  2.79  |  31.1   |  1.46  |  2.09  |  0.22  |  35          |
| 鋤頭嶼  |  ct03   |  70          |  3.54  |  40.6   |  2.19  |  2.57  |  0.32  |  20          |
| 鋤頭嶼  |  ct04   |  80          |  2.62  |  108.5  |  2.25  |  6.16  |  0.21  |  1           |
| 鋤頭嶼  |  ct05   |  90          |  4.72  |  53.1   |  3.75  |  3.17  |  0.41  |  0           |
| 東吉嶼  |  dg01   |  40          |  3.49  |  220.5  |  5.95  |  1.10  |  0.31  |  10          |



### 參考資料

[1] [Markdown 語法](http://markdown.tw)
